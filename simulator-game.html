<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BiasDecoded: Who Gets the Job?</title>
  <style>
    body {
      background-color: #1e1e2f;
      color: #fff;
      font-family: 'Courier New', monospace;
      text-align: center;
      margin: 0;
      padding: 20px;
    }
    h1 {
      font-size: 28px;
      margin-bottom: 10px;
    }
    .candidate-grid {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
    }
    .card {
      background-color: #2e2e3e;
      border: 2px solid #444;
      border-radius: 10px;
      padding: 15px;
      width: 180px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .card:hover {
      transform: scale(1.05);
      box-shadow: 0 0 10px #ffd166;
    }
    .selected {
      border-color: #4caf50;
      background-color: #3e3e5e;
    }
    .avatar {
      width: 80px;
      height: 80px;
      image-rendering: pixelated;
      margin-bottom: 10px;
      border-radius: 4px;
    }
    #biasMeter {
      margin-top: 30px;
      width: 300px;
      height: 20px;
      background-color: #555;
      border-radius: 10px;
      overflow: hidden;
      margin-left: auto;
      margin-right: auto;
    }
    #biasFill {
      height: 100%;
      width: 0%;
      background-color: #ffd166;
      transition: width 0.5s ease;
    }
    #biasScore {
      margin-top: 10px;
      font-weight: bold;
    }
    #feedback, #report {
      margin-top: 30px;
      font-size: 16px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #ff5e5e;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background-color: #ff9e9e;
    }
  </style>
</head>
<body>

  <h1>BiasDecoded: Who Gets the Job?</h1>
  <p>Select 1 candidate to shortlist for the job.</p>

  <div class="candidate-grid" id="candidateGrid"></div>

  <div id="biasMeter">
    <div id="biasFill"></div>
  </div>
  <div id="biasScore">Bias Score: 0</div>

  <button onclick="submitSelection()">Submit Selection</button>

  <div id="feedback"></div>
  <div id="report"></div>

  <script>
    const candidates = [
      { name: "Meera", gender: "Female", location: "Rural", education: "Community College", bias: 5 },
      { name: "Anjali", gender: "Female", location: "Urban", education: "MIT", bias: 30 }
    ];

    let selected = [];
    let biasScore = 0;
    let round = 1;

    const grid = document.getElementById("candidateGrid");

    candidates.forEach((c, i) => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <img src="assets/candidate${i + 1}.png" alt="${c.name}" class="avatar" />
        <strong>${c.name}</strong><br>${c.gender}<br>${c.location}<br>${c.education}
      `;
      card.onclick = () => toggleSelect(i, card);
      grid.appendChild(card);
    });

    function toggleSelect(index, card) {
      if (selected.includes(index)) {
        selected = selected.filter(i => i !== index);
        card.classList.remove("selected");
      } else {
        selected = [index];
        document.querySelectorAll(".card").forEach(c => c.classList.remove("selected"));
        card.classList.add("selected");
      }
    }

    function submitSelection() {
      if (selected.length !== 1) {
        alert("Please select exactly 1 candidate.");
        return;
      }

      biasScore = candidates[selected[0]].bias;
      document.getElementById("biasScore").innerText = `Bias Score: ${biasScore}`;
      document.getElementById("biasFill").style.width = `${biasScore}%`;

      let feedback = "";
      if (biasScore > 20) {
        feedback = "⚠️ Your model favored elite education and urban background. This may reflect socioeconomic bias.";
      } else {
        feedback = "✅ Your model shows inclusive decision-making. Lower bias detected.";
      }

      document.getElementById("feedback").innerText = feedback;

      if (round === 1) {
        document.querySelector("button").innerText = "Try Again";
        round++;
      } else {
        document.querySelector("button").style.display = "none";
        document.getElementById("report").innerHTML = `
          <h3>Final Report</h3>
          <p>Your first selection had a bias score of ${biasScore}. You were given a chance to rethink your choice.</p>
          <p>This shows how AI models can reflect human bias based on data and decisions. Fairness requires awareness and intervention.</p>
        `;
      }

      selected = [];
    }
  </script>

</body>
</html>
